{% extends "layouts/courier_base.html" %}
{% set page_title = "My Shipments" %}
{% set page_subtitle = "Shipments assigned to you with latest statuses." %}
{% block courier_content %}
<form class="row g-2 align-items-end mb-3">
    <div class="col-md-6">
        <label class="form-label">Search</label>
        <input name="q" class="form-control" placeholder="Tracking or customer" value="{{ search or '' }}">
    </div>
    <div class="col-md-3">
        <button class="btn btn-primary mt-auto" type="submit">Apply</button>
        <a class="btn btn-outline-secondary mt-auto" href="{{ url_for('courier.dashboard') }}">Reset</a>
    </div>
</form>
<div class="table-responsive">
    <table class="table table-striped table-hover align-middle">
        <thead>
            <tr>
                <th>Tracking #</th>
                <th>Customer</th>
                <th>Status</th>
                <th>Requested</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for shipment in shipments %}
            <tr>
                <td>{{ shipment.tracking_number }}</td>
                <td>{{ shipment.customer.first_name }} {{ shipment.customer.last_name }}</td>
                <td><span class="badge text-bg-{{ status_badge(shipment.latest_status()) }}">{{ shipment.latest_status() }}</span></td>
                <td>{{ shipment.requested_date.strftime('%Y-%m-%d') }}</td>
                <td class="text-end">
                    <a class="btn btn-outline-primary btn-sm" href="{{ url_for('courier.shipment_detail', shipment_id=shipment.id) }}">View</a>
                </td>
            </tr>
            {% else %}
                <tr><td colspan="5" class="text-center text-muted">No shipments assigned.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
